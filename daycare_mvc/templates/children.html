<!-- templates/children.html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Children Management</title>
    <style>
        body, h1, h2, p, ul, li, table { margin:0; padding:0; box-sizing:border-box; font-family:Arial, sans-serif;}
        body { background:#f5f9ff; color:#333; padding:20px;}
        header { background:#4a90e2; color:white; text-align:center; padding:20px; border-radius:10px; margin-bottom:20px;}
        header a { color:#fffae6; margin-left:20px; text-decoration:none; font-weight:bold;}
        header a:hover { color:#ffd700; }
        main { background:#fff; padding:20px; border-radius:10px; box-shadow:0px 4px 10px rgba(0,0,0,0.05);}
        .filter-buttons { text-align:center; margin-bottom:25px; }
        .filter-buttons button { padding:12px 25px; background:#4a90e2; border:4a90e2 2px solid #; border-radius:10px; margin:5px; cursor:pointer; font-size:1.1em; font-weight:bold; transition:0.3s; }
        .filter-buttons button:hover { background:#1e7e34; }
        table { width:100%; border-collapse:collapse; margin-top:15px;}
        table th, table td { border:1px solid #ccc; padding:10px; }
        table th { background:#d0e4ff; }
        table tr:nth-child(even){ background:#f0f8ff; }
        .hidden{ display:none; }
        form label { display:block; margin-top:10px; font-weight:bold; }
        form input { width:50%; padding:8px; margin-top:5px; border:1px solid #bbb; border-radius:5px; }
        form button { margin-top:15px; padding:12px 25px; background-color:#4a90e2; color:white; border:2px solid #1e7e34; border-radius:10px; font-size:1.1em; cursor:pointer; transition:0.3s; }
        form button:hover { background:#1e7e34; }

        /* Delete button style */
        .delete-btn {
            background-color:#ff4d4d;
            border:1px solid #d43f3f;
            border-radius:5px;
            color:white;
            padding:5px 10px;
            cursor:pointer;
            font-size:0.9em;
        }
        .delete-btn:hover { background-color:#d43f3f; }
        footer { text-align:center; margin-top:20px; color:#777;}
    </style>
</head>
<body>

<header>
    <h1>Children Management</h1>
    <a href="{{ url_for('home') }}">Back to Home</a>
</header>

<main>

    <h2>List of Children</h2>

    <div class="filter-buttons">
        <button onclick="showTable('bebe')">Bébé</button>
        <button onclick="showTable('prescolaire')">Préscolaire</button>
        <button onclick="showTable('preparatoire')">Préparatoire</button>
    </div>

    {% set groups = {'bebe': [], 'prescolaire': [], 'preparatoire': []} %}
    {% for child in children %}
        {% set g = child.group.lower().replace("é","e") %}
        {% if g in groups %}
            {% set _ = groups[g].append(child) %}
        {% endif %}
    {% endfor %}

    <!-- Bébé -->
    <section id="table-bebe" class="child-table">
        <h3 style="color:#4a90e2;">Bébé</h3>
        <table>
            <thead>
                <tr><th>ID</th><th>Name</th><th>Age</th><th>Group</th><th>Contact</th><th>Action</th></tr>
            </thead>
            <tbody>
                {% for child in groups['bebe'] %}
                <tr>
                    <td>{{ child.id }}</td>
                    <td>{{ child.name }}</td>
                    <td>{{ child.age }}</td>
                    <td>{{ child.group }}</td>
                    <td>{{ child.contact }}</td>
                    <td>
                        <form method="POST" action="{{ url_for('delete_child', child_id=child.id) }}" onsubmit="return confirm('Are you sure you want to delete this child?');">
                            <button type="submit" class="delete-btn">Delete</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>

    <!-- Préscolaire -->
    <section id="table-prescolaire" class="child-table hidden">
        <h3 style="color:#4a90e2;">Préscolaire</h3>
        <table>
            <thead>
                <tr><th>ID</th><th>Name</th><th>Age</th><th>Group</th><th>Contact</th><th>Action</th></tr>
            </thead>
            <tbody>
                {% for child in groups['prescolaire'] %}
                <tr>
                    <td>{{ child.id }}</td>
                    <td>{{ child.name }}</td>
                    <td>{{ child.age }}</td>
                    <td>{{ child.group }}</td>
                    <td>{{ child.contact }}</td>
                    <td>
                        <form method="POST" action="{{ url_for('delete_child', child_id=child.id) }}" onsubmit="return confirm('Are you sure you want to delete this child?');">
                            <button type="submit" class="delete-btn">Delete</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>

    <!-- Préparatoire -->
    <section id="table-preparatoire" class="child-table hidden">
        <h3 style="color:#4a90e2;">Préparatoire</h3>
        <table>
            <thead>
                <tr><th>ID</th><th>Name</th><th>Age</th><th>Group</th><th>Contact</th><th>Action</th></tr>
            </thead>
            <tbody>
                {% for child in groups['preparatoire'] %}
                <tr>
                    <td>{{ child.id }}</td>
                    <td>{{ child.name }}</td>
                    <td>{{ child.age }}</td>
                    <td>{{ child.group }}</td>
                    <td>{{ child.contact }}</td>
                    <td>
                        <form method="POST" action="{{ url_for('delete_child', child_id=child.id) }}" onsubmit="return confirm('Are you sure you want to delete this child?');">
                            <button type="submit" class="delete-btn">Delete</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>

    <hr style="margin:30px 0;">

    <h2>Add New Child</h2>
    <form action="{{ url_for('add_new_child') }}" method="post">
        <label>Name:</label>
        <input type="text" name="name" required>

        <label>Age:</label>
        <input type="number" name="age" required>

        <label>Group (bebe / prescolaire / preparatoire):</label>
        <input type="text" name="group" required>

        <label>Contact:</label>
        <input type="text" name="contact">

        <button type="submit">Add Child</button>
    </form>

</main>

<footer>
    <p>&copy; 2025 Daycare Management System</p>
</footer>

<script>
function showTable(type){
    document.querySelectorAll(".child-table").forEach(t => t.classList.add("hidden"));
    document.getElementById("table-"+type).classList.remove("hidden");
}
</script>

</body>
</html>
